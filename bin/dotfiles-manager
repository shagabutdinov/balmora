#!/usr/bin/env ruby

require 'dotfiles_manager'

verbose = false
begin
  args = ARGV.clone()
  verbose = !args.delete('--verbose').nil?()

  config = DotfilesManager::Config.new()
  manager = DotfilesManager.new(config, {verbose: true})

  manager.
    method(DotfilesManager::Utility.get_arguments_key(args[0])).
    call(args[1..-1])
rescue => error
  if verbose
    raise error
  end

  puts "ERROR: #{error.message} (#{error.class})"
  exit(1)
end